<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>爬虫 | 狐白de博客</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://416426.github.io/favicon.ico?v=1631499972591">
<link rel="stylesheet" href="https://416426.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="爬虫的概念

模拟客户端发送网络请求  获取响应  按照规则提取数据的程序

浏览器请求

url

在chrome -- 点检查 --  点network
url = 请求协议+网站域名+资源的路径+参数


浏览器请求url地址

当前..." />
    <meta name="keywords" content="Gridea" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://416426.github.io">
        <img src="https://416426.github.io/images/avatar.png?v=1631499972591" class="site-logo">
        <h1 class="site-title">狐白de博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://416426.github.io/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      <script language=javascript>
function siteTime(){
window.setTimeout("siteTime()", 1000);
var seconds = 1000
var minutes = seconds * 60
var hours = minutes * 60
var days = hours * 24
var years = days * 365
 
var today = new Date()
var todayYear = today.getFullYear()
var todayMonth = today.getMonth()
var todayDate = today.getDate()
var todayHour = today.getHours()
var todayMinute = today.getMinutes()
var todaySecond = today.getSeconds()
 
/* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳) 
year - 作为date对象的年份，为4位年份值
month - 0-11之间的整数，做为date对象的月份
day - 1-31之间的整数，做为date对象的天数
hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
minutes - 0-59之间的整数，做为date对象的分钟数
seconds - 0-59之间的整数，做为date对象的秒数
microseconds - 0-999之间的整数，做为date对象的毫秒数 */
var t1 = Date.UTC(2021,8,12,00,00,00)
var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond)
var diff = t2-t1
 
var diffYears = Math.floor(diff/years)
var diffDays = Math.floor((diff/days)-diffYears*365)
var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours)
var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes)
var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds)
document.getElementById("sitetime").innerHTML=" 已运行"+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒"
}
siteTime()
</script>
 
<a id="sitetime"></a>
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://416426.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">爬虫</h2>
            <div class="post-date">2021-09-11</div>
            
            <div class="post-content" v-pre>
              <h3 id="爬虫的概念">爬虫的概念</h3>
<ul>
<li>模拟客户端发送网络请求  获取响应  按照规则提取数据的程序</li>
</ul>
<h3 id="浏览器请求">浏览器请求</h3>
<ul>
<li>url
<ul>
<li>在chrome -- 点检查 --  点network</li>
<li>url = 请求协议+网站域名+资源的路径+参数</li>
</ul>
</li>
<li>浏览器请求url地址
<ul>
<li>当前url对应的响应+js+css+图片   ------&gt; elements中的内容</li>
</ul>
</li>
<li>爬虫请求url地址
<ul>
<li>当前的url对应的响应</li>
</ul>
</li>
<li>elements的内容和爬虫获取的url地址响应不同，爬虫需要以当前url地址对应的响应为准提取数据</li>
<li>当前URL地址对应的响应在
<ul>
<li>从network中找到当前url地址	点击response</li>
<li>页面右键显示网页源码</li>
</ul>
</li>
</ul>
<h3 id="http-https">HTTP    HTTPS</h3>
<ul>
<li>
<p>HTTP：超文本传输协议</p>
<ul>
<li>明文形式传输</li>
<li>效率更高，但不安全</li>
</ul>
</li>
<li>
<p>HTTPS： HTTP+ SSL（安全套接字层）</p>
<ul>
<li>传输前数据先加密， 之后解密获取内容</li>
<li>效率较低，但是安全</li>
</ul>
</li>
<li>
<p>HTTP协议及请求</p>
<ul>
<li>
<p>General  -  请求参数</p>
<ul>
<li>url地址</li>
<li>请求方式</li>
<li>状态码</li>
</ul>
</li>
<li>
<p>Response Headers -  响应头</p>
</li>
<li>
<p>Request  Headers  -  请求头</p>
<ul>
<li>
<p>点 View  source</p>
<p>请求行 -- get -请求方式</p>
</li>
<li>
<p>get请求和post请求的区别</p>
</li>
<li>
<p>get请求没有请求体， post有，get请求把数据放到url地址中</p>
<ul>
<li>post请求常用与登陆注册</li>
<li>post请求携带的数据量比get请求大，多，常用语传输打文本的时候</li>
</ul>
</li>
<li>
<p>请求头</p>
<ol>
<li>
<p><strong>User-Agent</strong>： 用户代理： 对方服务器可以通过user_agent知道当前请求对方资源的是什么浏览器</p>
<p>​	若果我们需要模拟手机版浏览器发送请求 ，对应的就需要把user_agent改成手机版</p>
</li>
<li>
<p><strong>Cookie</strong>: 用于存储用户信息，每次请求携带上发送给对方浏览器</p>
<ul>
<li>要获取登陆后才能访问的页面</li>
<li>对方服务器回通过cookie判断我们是不是一个爬虫</li>
<li>name ----- value</li>
</ul>
</li>
</ol>
</li>
<li>
<p>请求体</p>
<ul>
<li>携带数据</li>
<li>get请求没有请求体</li>
<li>post有请求体</li>
</ul>
</li>
</ul>
</li>
<li>
<p>HTTP协议--响应</p>
<ul>
<li>
<ol>
<li>
<p>响应头</p>
<p>Set-Cookie： 对方服务通过该字段设置cookie到本地</p>
</li>
</ol>
</li>
<li>
<ol start="2">
<li>
<p>响应体</p>
<p>url地址对应的响应</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Query String Parameters -  请求参数</p>
</li>
</ul>
</li>
</ul>
<h3 id="requests模块"><strong>requests模块</strong></h3>
<ol>
<li>
<p><strong>安装 --- pip install requests</strong></p>
</li>
<li>
<p><strong>发送get post请求  获取响应</strong></p>
<ol>
<li>response  =  requests.get(url)    # 发送get请求， 请求url对应的响应</li>
<li>response = requests.post(url, data = {请求题的字典})  ## 发送post请求， 请求的url地址对应的响应</li>
</ol>
</li>
<li>
<p><strong>response的方法</strong></p>
<ol>
<li>​	response.text
<ol>
<li>该方式常出现乱码, 原因是编码解码方式不一样，出现乱码使用<strong>response.encoding = &quot;utf-8&quot;</strong></li>
</ol>
</li>
<li>response.content.decode()
<ol>
<li>把响应的二进制字节流转化为str类型</li>
</ol>
</li>
<li>response.request.url  # 发送请求的url地址</li>
<li>response.url  # response响应的url地址</li>
<li>response.requset.headers  #请求头</li>
<li>response.headers # 响应头</li>
</ol>
</li>
<li>
<p><strong>获取网页源码的正确打开方式（一定可以获取到）</strong></p>
<ol>
<li>response.content.decode()</li>
<li>response.content.decode(“gbk”)</li>
<li>response.text</li>
</ol>
<ul>
<li>直接使用response.content.decode()获取，获取不到的话使用response.content.decode(“gbk”)国标码尝试，如果都获取不到response.text一定可以拿到</li>
</ul>
</li>
<li>
<p><strong>发送带header的请求</strong></p>
<pre><code class="language-python">headers = {&quot;User-Agent&quot;:&quot; Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1&quot;
&quot;Referer&quot;:&quot; https://fanyi.baidu.com/?aldtype=16047&quot;}

response = sequests.get(url, headers=headers)
</code></pre>
<ul>
<li>当请求网页发现带一个键值对依然不可以请求成功，可以尝试带更多的键值对，这是根据对方服务器的一个判断进行尝试，可以把除了cookie的全部键值对都带这进行尝试，如果依然不可以，把cookie也带着请求 ---- <strong>大部分情况User-Agent足以</strong></li>
</ul>
</li>
<li>
<p><strong>使用超时参数</strong></p>
<ol>
<li>requests.get(url, headers=headers, timeout=3)
<ol>
<li>timeout=3 --- 3秒内必须返回响应，否则回报错</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>​</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://416426.github.io/0czgSzVKJ/" class="tag">
                    Gridea
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://416426.github.io/hello-gridea/">
                  <h3 class="post-title">
                    Hello Gridea
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
